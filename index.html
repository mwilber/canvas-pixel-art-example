<html>
	<head>
		<title>JavaScript Pixel Art - HTML Canvas Without a Framework</title>
		<style>
			html, body {
				background: #7bb951;
				color: #fff;
				font-family:Arial, Helvetica, sans-serif;
				font-size: 12px;
				text-align: center;
			}
			canvas {
				background: #eee;
			}
		</style>
	</head>
	<body>
		<h1>JavaScript Pixel Art - HTML Canvas Without a Framework</h1>
		<canvas width="512" height="512"></canvas>
	</body>
	<script>

		let RESOLUTION = 128;
		const BACKGROUND_COLOR = "#220055";
		const BITMAP_PALETTE = [
			"transparent",
			"#000000",
			"#FFFFFF"
		];
		const BITMAP_ART = [[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,3,3,3,3,3,3,3,3,3,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,1,1,1,1,3,1,3,3,3,1,3,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,1,1,2,1,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,2,2,1,1,1,1,1,3,3,3,1,2,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,1,2,2,1,2,1,1,3,3,3,1,1,2,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,1,1,1,1,3,3,3,1,1,1,1,2,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,1,1,1,3,3,3,3,3,3,3,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,3,3,3,3,1,3,1,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,3,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1,1,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,3,3,3,3,3,3,3,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,3,3,1,3,3,3,3,3,1,3,3,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,3,3,1,3,3,3,3,3,1,3,3,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,3,3,1,0,1,3,3,3,1,0,1,3,3,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,3,3,1,0,1,3,3,3,1,0,1,3,3,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,1,0,1,3,3,3,3,3,1,0,1,3,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,1,0,1,3,3,3,3,3,3,3,1,0,1,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,3,3,1,1,3,3,3,3,3,3,3,3,3,1,1,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,3,1,0,1,3,3,3,3,3,3,3,3,3,1,0,1,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,1,3,3,3,3,3,3,3,3,3,1,0,0,1,1,1,0,0,0,0,0,0],[0,0,0,0,1,3,3,1,0,0,1,3,3,3,3,3,3,3,3,3,1,0,0,1,3,3,1,0,0,0,0,0],[0,0,0,1,1,3,3,3,1,1,1,3,3,3,3,3,3,3,3,3,1,1,1,3,3,3,1,1,0,0,0,0],[0,0,0,1,3,3,3,1,3,1,1,3,3,3,3,3,3,3,3,3,1,1,3,1,3,3,3,1,0,0,0,0],[0,0,1,1,3,3,3,1,3,1,1,3,3,3,3,3,3,3,3,3,1,1,3,1,3,3,3,1,1,0,0,0],[0,1,3,1,3,3,1,0,1,1,0,1,3,3,3,3,3,3,3,1,0,1,1,0,1,3,3,1,3,1,0,0],[0,1,1,3,1,3,1,0,0,0,0,0,1,3,3,3,3,3,1,0,0,0,0,0,1,3,1,3,1,1,0,0],[1,1,1,3,1,3,1,0,0,0,0,0,1,3,1,1,1,3,1,0,0,0,0,0,1,3,1,3,1,1,1,0],[1,1,3,3,1,3,1,0,0,0,0,1,3,3,1,0,1,3,3,1,0,0,0,0,1,3,1,3,3,1,1,0],[0,1,3,1,1,3,1,0,0,0,0,1,3,3,1,0,1,3,3,1,0,0,0,0,1,3,1,1,3,1,0,0],[0,1,3,1,3,1,0,0,0,0,1,3,3,1,0,0,0,1,3,3,1,0,0,0,0,1,3,1,3,1,0,0],[0,1,1,1,3,1,0,0,0,0,1,3,3,1,0,0,0,1,3,3,1,0,0,0,0,1,3,1,1,1,0,0],[0,0,0,1,1,1,0,0,0,1,3,3,1,0,0,0,0,0,1,3,3,1,0,0,0,1,1,1,0,0,0,0],[0,0,0,0,1,1,0,0,0,1,3,3,1,0,0,0,0,0,1,3,3,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,1,0,0,0,0,0,0,0],[0,0,0,0,0,1,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,1,0,0,0,0,0,0],[0,1,1,1,1,1,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,1,1,1,1,1,0,0],[1,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,1,0],[1,3,3,3,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,1,0],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0]];
		let ctx = null;

		let DrawBackground = (color) => {
			ctx.fillStyle = color;
			ctx.fillRect(0, 0, RESOLUTION, RESOLUTION);
		};

		let DrawPixel = (x, y, color) => {
			ctx.fillStyle = color;
			ctx.fillRect(Math.round(x), Math.round(y), 1, 1);
		};

		let DrawColumn = (x, y, h, color) => {
			ctx.fillStyle = color;
			ctx.fillRect(Math.round(x), Math.round(y), 1, Math.round(h));
		};

		let RenderStarfield = (starCount) => {
			for( let i=0; i<starCount; i++ ) {
				DrawPixel(
					Math.round(Math.random()*RESOLUTION),
					Math.round(Math.random()*RESOLUTION),
					"#ffffff"
				);
			}
		};

		let RenderMoon = (x, y, r, color) => {
			for( let i = x-r; i <= x+r; i++ ){
				const h = Math.floor(Math.sqrt(Math.pow(r,2) - Math.pow((i-x),2))*2);
				DrawColumn(i, y-Math.floor(h/2), h, color)
			}
		};

		let RenderTerrain = (peaks, color) => {
			for(let idx=1; idx < peaks.length; idx++) {
				let height = peaks[idx - 1];
				let peakDistance = (RESOLUTION/(peaks.length-1));
				let currentPeakPosition = peakDistance * (idx-1);
				let peakDifference = peaks[idx] - height;
				let stepHeight = peakDifference / peakDistance;
				for( let step = 0; step < peakDistance; step++ ){
					let currenHeight = height + (stepHeight * step);
					DrawColumn(
						currentPeakPosition + step,
						RESOLUTION - currenHeight,
						currenHeight,
						color
					);
				}
			}
		};

		let RenderBitmap = (x, y, bitmap, color) => {
			bitmap.forEach((row, idx) => {
				row.forEach((pixel, col) => {
					DrawPixel(x + col, y + idx, BITMAP_PALETTE[pixel] ? BITMAP_PALETTE[pixel] : color);
				});
			});
		};

		window.onload = () => {
			const canvas = document.querySelector('canvas');
			ctx = canvas.getContext('2d');

			ctx.scale(canvas.width/RESOLUTION, canvas.height/RESOLUTION);

			ctx.fillStyle = "#eeeeff";
			ctx.fillRect(0, 0, canvas.height, canvas.width);
			ctx.fillStyle = "#9999ff";
			ctx.fillText("Time to Draw Something!", 10, 20, canvas.width-20);

			DrawBackground(BACKGROUND_COLOR);
			DrawPixel(64, 64, "#FF0000");
			RenderStarfield(50);

			RenderMoon(32, 32, 38, "#FFFFEE");

			//DrawColumn(1, 1, 32, "#00FF00");

			// RenderTerrain([64,32]);
			RenderTerrain([25, 64, 22, 50, 30, 50], "#339900");

			RenderTerrain([7, 10, 10, 7], "#00CC00");

			// const eyeBitmap = [
			// 		[0,0,0,1,1,0,0,0],
			// 		[0,0,1,2,2,1,0,0],
			// 		[0,1,2,2,2,2,1,0],
			// 		[1,2,2,2,2,2,2,1],
			// 		[1,2,2,2,2,2,2,1],
			// 		[1,2,2,2,1,1,2,1],
			// 		[1,2,2,1,1,1,1,1],
			// 		[0,1,2,1,1,1,1,0],
			// 		[0,0,1,2,1,1,0,0],
			// 		[0,0,0,1,1,0,0,0]
			// 	];
			// RenderBitmap(64, 96, eyeBitmap);
			// RenderBitmap(72, 96, eyeBitmap);

			// RenderBitmap(80, 60, BITMAP_ART, "#7bb951");

			RenderBitmap(10, 58, BITMAP_ART, "#00FFFF");
			RenderBitmap(50, 64, BITMAP_ART, "#FF00FF");
			RenderBitmap(90, 59, BITMAP_ART, "#FFFF00");

		}
	</script>
</html>